<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Webcam Tracker: Main Function</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Webcam Tracker
   &#160;<span id="projectnumber">V1.0</span>
   </div>
   <div id="projectbrief">Using openCV and an Arduino Uno</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Main Function<div class="ingroups"><a class="el" href="group___w_c_t.html">Webcam tracking software</a> &raquo; <a class="el" href="group__processing.html">The OpenCV proccesing module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This group is the main entry point for the openCV processing console application.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Main Function:</div>
<div class="dyncontent">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__main.svg" width="343" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:_main_8cpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_main_8cpp.html">Main.cpp</a></td></tr>
<tr class="memdesc:_main_8cpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">OpenCV proccesing for object tracking with a webcam and arduino uno. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae1f91200f50fffab557456b23bdfa58c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#gae1f91200f50fffab557456b23bdfa58c">scale</a> (float input, float rMax, float tMax)</td></tr>
<tr class="memdesc:gae1f91200f50fffab557456b23bdfa58c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scale funtion.  <a href="#gae1f91200f50fffab557456b23bdfa58c">More...</a><br /></td></tr>
<tr class="separator:gae1f91200f50fffab557456b23bdfa58c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51af30a60f9f02777c6396b8247e356f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#ga51af30a60f9f02777c6396b8247e356f">main</a> ()</td></tr>
<tr class="memdesc:ga51af30a60f9f02777c6396b8247e356f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function.  <a href="#ga51af30a60f9f02777c6396b8247e356f">More...</a><br /></td></tr>
<tr class="separator:ga51af30a60f9f02777c6396b8247e356f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga1ed1786965b2cff5cd92e23bb75a70aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1ed1786965b2cff5cd92e23bb75a70aa"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a></td></tr>
<tr class="memdesc:ga1ed1786965b2cff5cd92e23bb75a70aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object holding an OpenCV matrix for the capture source. <br /></td></tr>
<tr class="separator:ga1ed1786965b2cff5cd92e23bb75a70aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36e253777951786d2c065319da8f0bf9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga36e253777951786d2c065319da8f0bf9"></a>
vector&lt; <a class="el" href="class_pipe_line_action.html">PipeLineAction</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a></td></tr>
<tr class="memdesc:ga36e253777951786d2c065319da8f0bf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">All OpenCV pipeline actions. <br /></td></tr>
<tr class="separator:ga36e253777951786d2c065319da8f0bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6cdd6ff05d3288fe022c839141ea6e4c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6cdd6ff05d3288fe022c839141ea6e4c"></a>
<a class="el" href="class_serial_com.html">SerialCom</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a></td></tr>
<tr class="memdesc:ga6cdd6ff05d3288fe022c839141ea6e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object preforming the serial communication. <br /></td></tr>
<tr class="separator:ga6cdd6ff05d3288fe022c839141ea6e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa206bef404054a6af8134d0bfb4e1343"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa206bef404054a6af8134d0bfb4e1343"></a>
<a class="el" href="class_g_u_i.html">GUI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a></td></tr>
<tr class="memdesc:gaa206bef404054a6af8134d0bfb4e1343"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object holding the grafic user interface. <br /></td></tr>
<tr class="separator:gaa206bef404054a6af8134d0bfb4e1343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23e5070dbc6a520457d2910473552049"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga23e5070dbc6a520457d2910473552049"></a>
<a class="el" href="class_capture.html">Capture</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#ga23e5070dbc6a520457d2910473552049">webCam</a></td></tr>
<tr class="memdesc:ga23e5070dbc6a520457d2910473552049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object holding the capture device. <br /></td></tr>
<tr class="separator:ga23e5070dbc6a520457d2910473552049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb04dcc496f0b23d2bbeeba9ff93a5d0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaeb04dcc496f0b23d2bbeeba9ff93a5d0"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main.html#gaeb04dcc496f0b23d2bbeeba9ff93a5d0">arduinoCommand</a> [100]</td></tr>
<tr class="memdesc:gaeb04dcc496f0b23d2bbeeba9ff93a5d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command to be send to the arduino */. <br /></td></tr>
<tr class="separator:gaeb04dcc496f0b23d2bbeeba9ff93a5d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This group is the main entry point for the openCV processing console application. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae1f91200f50fffab557456b23bdfa58c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int scale </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>rMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>tMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scale funtion. </p>
<p>Scales the input to a range. Range is defined by rMax and tMax. Where rMax is the maximum of the input range and tMax is the maximum of the target(output) range </p><dl class="section note"><dt>Note</dt><dd>function assums that for both ranges the minimum is the negative maximum </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>input to scale </td></tr>
    <tr><td class="paramname">rMax</td><td>maximun of the input range </td></tr>
    <tr><td class="paramname">tMax</td><td>maximum of the target(output) range </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int: scaled value from input to target range </dd></dl>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;{</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">float</span> rMin = -rMax;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">float</span> tMin = -tMax;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(((input - rMin) / (rMax - rMin))*(tMax-tMin)+tMin);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__main_gae1f91200f50fffab557456b23bdfa58c_icgraph.svg" width="168" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga51af30a60f9f02777c6396b8247e356f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function. </p>
<p>sets up a source Matrix, creates the OpenCV pipeline, starts serial Communication with an Arduino Unoand initiates a graphic user interface.Continues until the escape - key is pressed or the console window is closed. In each loop it captures an image of the webcam.Excecutes the pipeline actions.Sends the output of the pipeline to the arduino and shows the appropriat windows on screen.</p>
<dl class="section note"><dt>Note</dt><dd>setup for the serial communication<ul>
<li>COM port : COM4</li>
<li>Bauderate : 9600</li>
<li>data size : 8 bits</li>
<li>parity : none</li>
<li>stop bits : 1</li>
</ul>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>int exit-code</dd></dl>
<p>sets up a source Matrix, creates the OpenCV pipeline, starts serial Communication with an Arduino Uno and initiates a graphic user interface. Continues until the escape-key is pressed or the console window is closed. In each loop it captures an image of the webcam. Excecutes the pipeline actions. Sends the output of the pipeline to the arduino and shows the appropriat windows on screen.</p>
<dl class="section note"><dt>Note</dt><dd>setup for the serial communication<ul>
<li>COM port: COM4</li>
<li>Bauderate: 9600</li>
<li>data size: 8 bits</li>
<li>parity: none</li>
<li>stop bits : 1 </li>
</ul>
</dd></dl>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">//Create pipeline</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_blur.html">Blur</a>(<span class="stringliteral">&quot;Blurred&quot;</span>));</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_convert_color_space.html">ConvertColorSpace</a>(<span class="stringliteral">&quot;HSV&quot;</span>));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">    #ifdef _DEBUG //Visual studio debug mode</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="struct_h_s_v___m_a_s_k___v_a_l_u_e_s.html">HSV_MASK_VALUES</a> testMask{ 0,87,100,9,211,255 };</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_mask.html">Mask</a>(<span class="stringliteral">&quot;Mask&quot;</span>, testMask));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">    #else //Release mode</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_mask.html">Mask</a>(<span class="stringliteral">&quot;Mask&quot;</span>));</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">    #endif // DEBUG</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    </div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_contour.html">Contour</a>(<span class="stringliteral">&quot;Contours&quot;</span>));</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.push_back(<span class="keyword">new</span> <a class="code" href="class_moment.html">Moment</a>(<span class="stringliteral">&quot;Moment&quot;</span>));</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">//Start serial communication</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a> = <a class="code" href="class_serial_com.html#a386d2a4649e3a00b9b2f6e6cef921bbd">SerialCom::initialize</a>(<span class="stringliteral">&quot;COM4&quot;</span>,9600, 8, <span class="charliteral">&#39;N&#39;</span>, 1);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    sprintf_s(<a class="code" href="group__main.html#gaeb04dcc496f0b23d2bbeeba9ff93a5d0">arduinoCommand</a>, <span class="stringliteral">&quot;Home\n&quot;</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a>-&gt;<a class="code" href="class_serial_com.html#a21ffd47b01f7337633a46bdb4ff47841">write</a>(<a class="code" href="group__main.html#gaeb04dcc496f0b23d2bbeeba9ff93a5d0">arduinoCommand</a>);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">//Create grafic user interface</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a> = <span class="keyword">new</span> <a class="code" href="class_g_u_i.html">GUI</a>(<a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="group__main.html#ga23e5070dbc6a520457d2910473552049">webCam</a> = <a class="code" href="class_capture.html">Capture</a>(0, cv::CAP_ANY);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">//Loop until Esc-key pressed</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">while</span> (cv::waitKey(33) != 27)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="comment">//Get input source</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;         <a class="code" href="group__main.html#ga23e5070dbc6a520457d2910473552049">webCam</a>.<a class="code" href="class_capture.html#a0de3a886006d88c6370537a4c94d5512">getFeed</a>(<a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>.empty())</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;             <a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a> = cv::imread(<span class="stringliteral">&quot;oranje_pingpongbal.jpg&quot;</span>, cv::IMREAD_COLOR);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;             </div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="comment">//Run pipeline, every input gets its output from the previous action</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        vector&lt;PipeLineAction*&gt;::iterator it;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>[0]-&gt;setAction(&amp;<a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">for</span> (it = <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.begin()+1 ; it != <a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.end(); it++)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            (*it)-&gt;setAction((*(it - 1))-&gt;getAction());        </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }  </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">//Get output of the pipeline</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        cv::Point c;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="class_moment.html">Moment</a>* m = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="class_moment.html">Moment</a>*<span class="keyword">&gt;</span>(<a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>[<a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>.size() - 1]);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        m ? c = *m-&gt;<a class="code" href="class_moment.html#a3935415cd459b88170c02b21f9bb967e">getCenterOfMass</a>() : c = cv::Point(-10, -10);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        </div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (c.x &gt;= 0 &amp;&amp; c.y &gt;= 0) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="comment">//Translate center of mass to reasonable x and y coordinats</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordtype">float</span> yInput = (<a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>.rows / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(2)) - c.y;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordtype">float</span> xInput = c.x - (<a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>.cols / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(2));</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">//Scale to range of -15° to 15° this because other wise the arduino flips</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">//X(pan) is inverted because of mirrored immage</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordtype">int</span> yOut = <a class="code" href="group__main.html#gae1f91200f50fffab557456b23bdfa58c">scale</a>(yInput, <a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>.rows / static_cast&lt;float&gt;(2), 15);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordtype">int</span> xOut = -<a class="code" href="group__main.html#gae1f91200f50fffab557456b23bdfa58c">scale</a>(xInput, <a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>.cols / static_cast&lt;float&gt;(2), 15);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">//Write to serial</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a>-&gt;<a class="code" href="class_g_u_i.html#a3c94195c575e4f75b77ee938e6e1c832">trackingActive</a>()) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                sprintf_s(<a class="code" href="group__main.html#gaeb04dcc496f0b23d2bbeeba9ff93a5d0">arduinoCommand</a>,<span class="stringliteral">&quot;PTO%d:%d\n&quot;</span>, xOut, yOut);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <a class="code" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a>-&gt;<a class="code" href="class_serial_com.html#a21ffd47b01f7337633a46bdb4ff47841">write</a>(<a class="code" href="group__main.html#gaeb04dcc496f0b23d2bbeeba9ff93a5d0">arduinoCommand</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">//Read serial input</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a>-&gt;<a class="code" href="class_serial_com.html#a5f10f6c75de58e1c95ac88744dcbeaa5">readString</a>();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a>-&gt;<a class="code" href="class_serial_com.html#a096924019be31614a3328cc994265e88">newMessageAvailable</a>())</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <a class="code" href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a>-&gt;<a class="code" href="class_g_u_i.html#a975c47da657d318d058db818060535ae">addMessage</a>(<a class="code" href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a>-&gt;<a class="code" href="class_serial_com.html#a54d5e4b5bf7bbe7a16cfc2b3b3e4e5ae">getLastMessage</a>()-&gt;c_str());</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="comment">//Show images</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a>-&gt;<a class="code" href="class_g_u_i.html#a42202565084f404560810d3ed5da672a">showOutput</a>(<a class="code" href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a>, &amp;c);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a>-&gt;<a class="code" href="class_g_u_i.html#aca1eb90fb85b5645a5278af014ee98dd">showWindows</a>(<a class="code" href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;       </div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    cv::destroyAllWindows();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}<div class="ttc" id="class_moment_html_a3935415cd459b88170c02b21f9bb967e"><div class="ttname"><a href="class_moment.html#a3935415cd459b88170c02b21f9bb967e">Moment::getCenterOfMass</a></div><div class="ttdeci">cv::Point * getCenterOfMass()</div><div class="ttdoc">gets the output of the action </div><div class="ttdef"><b>Definition:</b> Moment.cpp:38</div></div>
<div class="ttc" id="class_g_u_i_html_a975c47da657d318d058db818060535ae"><div class="ttname"><a href="class_g_u_i.html#a975c47da657d318d058db818060535ae">GUI::addMessage</a></div><div class="ttdeci">void addMessage(string message)</div><div class="ttdoc">adds a message to the GUI console </div><div class="ttdef"><b>Definition:</b> GUI.cpp:108</div></div>
<div class="ttc" id="struct_h_s_v___m_a_s_k___v_a_l_u_e_s_html"><div class="ttname"><a href="struct_h_s_v___m_a_s_k___v_a_l_u_e_s.html">HSV_MASK_VALUES</a></div><div class="ttdoc">Struct to easily add predifined maks values. </div><div class="ttdef"><b>Definition:</b> Mask.h:15</div></div>
<div class="ttc" id="class_serial_com_html_a5f10f6c75de58e1c95ac88744dcbeaa5"><div class="ttname"><a href="class_serial_com.html#a5f10f6c75de58e1c95ac88744dcbeaa5">SerialCom::readString</a></div><div class="ttdeci">void readString()</div><div class="ttdoc">Reads the serial port for incomming messages. </div><div class="ttdef"><b>Definition:</b> SerialCom.cpp:69</div></div>
<div class="ttc" id="class_g_u_i_html_a42202565084f404560810d3ed5da672a"><div class="ttname"><a href="class_g_u_i.html#a42202565084f404560810d3ed5da672a">GUI::showOutput</a></div><div class="ttdeci">void showOutput(cv::Mat &amp;src, cv::Point *trackingPoint)</div><div class="ttdoc">shows the output Matrix to the user </div><div class="ttdef"><b>Definition:</b> GUI.cpp:76</div></div>
<div class="ttc" id="group__main_html_gae1f91200f50fffab557456b23bdfa58c"><div class="ttname"><a href="group__main.html#gae1f91200f50fffab557456b23bdfa58c">scale</a></div><div class="ttdeci">int scale(float input, float rMax, float tMax)</div><div class="ttdoc">Scale funtion. </div><div class="ttdef"><b>Definition:</b> Main.cpp:43</div></div>
<div class="ttc" id="group__main_html_ga36e253777951786d2c065319da8f0bf9"><div class="ttname"><a href="group__main.html#ga36e253777951786d2c065319da8f0bf9">actions</a></div><div class="ttdeci">vector&lt; PipeLineAction * &gt; actions</div><div class="ttdoc">All OpenCV pipeline actions. </div><div class="ttdef"><b>Definition:</b> Main.cpp:27</div></div>
<div class="ttc" id="class_capture_html_a0de3a886006d88c6370537a4c94d5512"><div class="ttname"><a href="class_capture.html#a0de3a886006d88c6370537a4c94d5512">Capture::getFeed</a></div><div class="ttdeci">int getFeed(cv::Mat &amp;src)</div><div class="ttdoc">gets the webcam feed </div><div class="ttdef"><b>Definition:</b> Capture.cpp:37</div></div>
<div class="ttc" id="class_serial_com_html_a21ffd47b01f7337633a46bdb4ff47841"><div class="ttname"><a href="class_serial_com.html#a21ffd47b01f7337633a46bdb4ff47841">SerialCom::write</a></div><div class="ttdeci">void write(char *message)</div><div class="ttdoc">Sends a message(command) to the Arduino Uno. </div><div class="ttdef"><b>Definition:</b> SerialCom.cpp:61</div></div>
<div class="ttc" id="group__main_html_ga1ed1786965b2cff5cd92e23bb75a70aa"><div class="ttname"><a href="group__main.html#ga1ed1786965b2cff5cd92e23bb75a70aa">src</a></div><div class="ttdeci">cv::Mat src</div><div class="ttdoc">Object holding an OpenCV matrix for the capture source. </div><div class="ttdef"><b>Definition:</b> Main.cpp:26</div></div>
<div class="ttc" id="class_capture_html"><div class="ttname"><a href="class_capture.html">Capture</a></div><div class="ttdoc">Opens the webcam and captures its feed if available. </div><div class="ttdef"><b>Definition:</b> Capture.h:14</div></div>
<div class="ttc" id="class_g_u_i_html"><div class="ttname"><a href="class_g_u_i.html">GUI</a></div><div class="ttdoc">Contains the graphic user interface main class. Member of GUI classes Graphic group. </div><div class="ttdef"><b>Definition:</b> GUI.h:27</div></div>
<div class="ttc" id="group__main_html_ga23e5070dbc6a520457d2910473552049"><div class="ttname"><a href="group__main.html#ga23e5070dbc6a520457d2910473552049">webCam</a></div><div class="ttdeci">Capture webCam</div><div class="ttdoc">Object holding the capture device. </div><div class="ttdef"><b>Definition:</b> Main.cpp:30</div></div>
<div class="ttc" id="class_convert_color_space_html"><div class="ttname"><a href="class_convert_color_space.html">ConvertColorSpace</a></div><div class="ttdoc">Child-classe, converts from BGR to HSV color space. </div><div class="ttdef"><b>Definition:</b> ConvertColorSpace.h:14</div></div>
<div class="ttc" id="class_g_u_i_html_a3c94195c575e4f75b77ee938e6e1c832"><div class="ttname"><a href="class_g_u_i.html#a3c94195c575e4f75b77ee938e6e1c832">GUI::trackingActive</a></div><div class="ttdeci">bool trackingActive()</div><div class="ttdoc">gets the tracking state </div><div class="ttdef"><b>Definition:</b> GUI.cpp:113</div></div>
<div class="ttc" id="class_serial_com_html_a54d5e4b5bf7bbe7a16cfc2b3b3e4e5ae"><div class="ttname"><a href="class_serial_com.html#a54d5e4b5bf7bbe7a16cfc2b3b3e4e5ae">SerialCom::getLastMessage</a></div><div class="ttdeci">string * getLastMessage()</div><div class="ttdoc">Returns last message. </div><div class="ttdef"><b>Definition:</b> SerialCom.cpp:98</div></div>
<div class="ttc" id="group__main_html_gaeb04dcc496f0b23d2bbeeba9ff93a5d0"><div class="ttname"><a href="group__main.html#gaeb04dcc496f0b23d2bbeeba9ff93a5d0">arduinoCommand</a></div><div class="ttdeci">char arduinoCommand[100]</div><div class="ttdoc">Command to be send to the arduino */. </div><div class="ttdef"><b>Definition:</b> Main.cpp:31</div></div>
<div class="ttc" id="class_serial_com_html_a386d2a4649e3a00b9b2f6e6cef921bbd"><div class="ttname"><a href="class_serial_com.html#a386d2a4649e3a00b9b2f6e6cef921bbd">SerialCom::initialize</a></div><div class="ttdeci">static SerialCom * initialize(string portName, long baudeRate, int dataSize, char parityType, float nStopBits)</div><div class="ttdoc">Creates a object if there isn&amp;#39;t one already. </div><div class="ttdef"><b>Definition:</b> SerialCom.cpp:52</div></div>
<div class="ttc" id="class_contour_html"><div class="ttname"><a href="class_contour.html">Contour</a></div><div class="ttdoc">Child-classe, implements OpenCV&amp;#39;s contour finding. </div><div class="ttdef"><b>Definition:</b> Contour.h:15</div></div>
<div class="ttc" id="class_g_u_i_html_aca1eb90fb85b5645a5278af014ee98dd"><div class="ttname"><a href="class_g_u_i.html#aca1eb90fb85b5645a5278af014ee98dd">GUI::showWindows</a></div><div class="ttdeci">void showWindows(vector&lt; PipeLineAction * &gt; actions)</div><div class="ttdoc">shows pipeline action windows depending on the state of the corresponding menu button ...</div><div class="ttdef"><b>Definition:</b> GUI.cpp:89</div></div>
<div class="ttc" id="group__main_html_gaa206bef404054a6af8134d0bfb4e1343"><div class="ttname"><a href="group__main.html#gaa206bef404054a6af8134d0bfb4e1343">g</a></div><div class="ttdeci">GUI * g</div><div class="ttdoc">Object holding the grafic user interface. </div><div class="ttdef"><b>Definition:</b> Main.cpp:29</div></div>
<div class="ttc" id="class_moment_html"><div class="ttname"><a href="class_moment.html">Moment</a></div><div class="ttdoc">Child-classe, implements OpenCV&amp;#39;s center of mass finding. </div><div class="ttdef"><b>Definition:</b> Moment.h:15</div></div>
<div class="ttc" id="group__main_html_ga6cdd6ff05d3288fe022c839141ea6e4c"><div class="ttname"><a href="group__main.html#ga6cdd6ff05d3288fe022c839141ea6e4c">sc</a></div><div class="ttdeci">SerialCom * sc</div><div class="ttdoc">Object preforming the serial communication. </div><div class="ttdef"><b>Definition:</b> Main.cpp:28</div></div>
<div class="ttc" id="class_serial_com_html_a096924019be31614a3328cc994265e88"><div class="ttname"><a href="class_serial_com.html#a096924019be31614a3328cc994265e88">SerialCom::newMessageAvailable</a></div><div class="ttdeci">bool newMessageAvailable()</div><div class="ttdoc">Shows if a new message is recieved from the Serial input. </div><div class="ttdef"><b>Definition:</b> SerialCom.cpp:89</div></div>
<div class="ttc" id="class_mask_html"><div class="ttname"><a href="class_mask.html">Mask</a></div><div class="ttdoc">Child-classe, applies a mask to the input matrix. </div><div class="ttdef"><b>Definition:</b> Mask.h:28</div></div>
<div class="ttc" id="class_blur_html"><div class="ttname"><a href="class_blur.html">Blur</a></div><div class="ttdoc">Child-classe, implements OpenCV&amp;#39;s GaussianBlur. </div><div class="ttdef"><b>Definition:</b> Blur.h:14</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="group__main_ga51af30a60f9f02777c6396b8247e356f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
